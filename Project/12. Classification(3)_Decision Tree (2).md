# 2022-1 학기 데이터마이닝 프로젝트_(12)  

🐍 저번 글에서는 결정 트리를 통해 Classification을 진행했다. correlation 분석으로 얻어진 4개의 attribute set과 PCA dataframe에 대해서 결정트리 모델을 사용해 예측력을 평가해 보았다. 이번 글에서는 이렇게 얻어진 결정 트리 모델을 시각화해볼 것이다.  

***  

## 1. 라이브러리  

📌 decision tree를 위한 graphviz 라이브러리를 사용한다. 이 라이브러리는 처음 설치할 때 바이너리 코드의 경로를 잘 설정해줘야한다.  

📌  데이터의 크기가 크지 않은 경우에는 만들어진 결정 트리를 살펴보기 어렵지 않지만, 이번에 우리가 사용한 데이터는 column이 많기에 한번에 파악하기 어렵다. 따라서 이렇게 만들어진 결정 트리를 .png 파일로 저장할 필요가 있다. 이때 사용하는 라이브러리가 pydotplus 이다.  


```py  
# decision tree를 위한 export_graphviz 라이브러리 임포트
# sklearn 모듈의 tree 라이브러리 임포트
from sklearn.tree import export_graphviz
import graphviz
from sklearn import tree
from os import system

# 결정트리를 png 형태로 저장하기 위한 라이브러리 임포트
import pydotplus
```  

***  

## 2. attribute set 4 [age, aphi, aplo, cholesterol, gluc, BMI] decision tree  

📌 test set에 대해 높은 accuracy를 보인 attribute set 4에 대해서 시각화를 진행할 것이다.  

```py
# attribute set 4에 대한 결정트리 시각화 (max_depth = 5)
dot_data = tree.export_graphviz(accuracy_test(cardio_4_feat, 5)[0],        # 의사결정나무 모형 대입
                               out_file = None,                            # file로 변환할 것인가
                               feature_names = cardio_4_feat.columns,      # feature 이름
                               class_names = cardio.target_rand,           # target 이름
                               filled = True,                              # 그림에 색상을 넣을것인가
                               rounded = True,                             # 반올림을 진행할 것인가
                               special_characters = True)                  # 특수문자를 사용하나

graph = pydotplus.graph_from_dot_data(dot_data)
graph.set_size('"60,30!"')
graph.write_png('atribute_4_tree.png')
```  

<p align="center"><img src="https://user-images.githubusercontent.com/65170165/199865789-68d81a6a-ef75-461d-a200-845feaaacb6e.png" width="1000" /></p>  


